<!DOCTYPE html>

<html lang="en">
    <head>
        <title>panke.me - RealJenius.com - Now With Less PHP</title>
    	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="panke.me - Hold my beer; watch this." />
    	<meta name="author" content="R.J. Lorimer" />
		<meta charset="UTF-8" />


    	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    	<!--[if lt IE 9]>
      		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    	<![endif]-->

		<link rel="shortcut icon" type="image/png" href="/favicon.ico"/>
		<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Roboto+Slab' rel='stylesheet' type='text/css'>
		<link href="/stylesheets/bootstrap.min.css" rel="stylesheet" />
		<link href="/stylesheets/syntax-dark.css" rel="stylesheet" />
		<link href="/stylesheets/main.css" rel="stylesheet"/>
    </head>
    <body>
    	<div class="navrow navbar-fixed-top">
	    	<div class="container">
				<div class="navbar navbar-inverse ">
					<a class="navbar-brand" href="/">
						<span class="title_letter">P</span>an<span class="title_letter">k</span>e.me
					</a>

					<ul class="nav navbar-nav ">

                        <li>
                            <a role="menuitem" tabindex="-1" href="/cats_and_tags.html">分类·标签</a>
                        </li>
                        <li class="visible-lg">
                            <a role="menuitem" tabindex="-1" href="/tag/java/">Java Articles</a>
                        </li>
                        <li  class="visible-lg" >
                            <a role="menuitem" tabindex="-1" href="/category/distilling-jruby/">Distilling JRuby Series</a>
                        </li>
                        <li  class="visible-lg" >
                            <a role="menuitem" tabindex="-1" href="/tag/jekyll/">Jekyll Articles</a>
                        </li>
                        <li class="" ><a href="/about.html">关于</a></li>
	                    <!--<li class="dropdown hidden-sm" id="explore">
	                    	<a class="dropdown-toggle" role="button" id="exploredrop" data-toggle="dropdown" href="#">Explore <b class="caret"></b></a>
	                    	<ul class="dropdown-menu" role="menu" aria-labelledby="exploredrop">
                    			<li role="presentation">
                					<a role="menuitem" tabindex="-1" href="/cats_and_tags.html#categories">Categories</a>
                    			</li>
                    			<li role="presentation">
                					<a role="menuitem" tabindex="-1" href="/cats_and_tags.html#tags">Tags</a>
                    			</li>
                    			<li class="divider"></li>
                    			<li role="presentation" >
                					<a role="menuitem" tabindex="-1" href="/tag/java/">Java Articles</a>
                    			</li>
                    			<li role="presentation">
                					<a role="menuitem" tabindex="-1" href="/category/distilling-jruby/">Distilling JRuby Series</a>
                    			</li>
                    			<li role="presentation" >
                					<a role="menuitem" tabindex="-1" href="/tag/jekyll/">Jekyll Articles</a>
                    			</li>
                    		</ul>
	                    </li>-->
	                </ul>

	                <!--<ul class="nav navbar-nav pull-right hidden-sm">
	                    <li class="dropdown" id="elsewhere">
	                    	<a class="dropdown-toggle" role="button" id="elsewheredrop" data-toggle="dropdown" href="#">
	                			Elsewhere <b class="caret"></b>
	                		</a>
	                		<ul class="dropdown-menu" role="menu" aria-labelledby="elsewheredrop">
	                			<li role="presentation">
									<a role="menuitem" tabindex="-1" href="http://www.twitter.com/">Twitter</a>
								</li>
								<li role="presentation">
									<a role="menuitem" tabindex="-1"  href="http://www.linkedin.com/in/rjlorimer">LinkedIn</a>
								</li>
								<li role="presentation">
									<a role="menuitem" tabindex="-1"  href="https://github.com/">GitHub</a>
								</li>
								<li role="presentation">
									<a role="menuitem" tabindex="-1"  href="http://live.xbox.com/en-US/profile/profile.aspx?pp=0&GamerTag=Real+Jenius">XBox Live</a>
								</li>
								<li role="presentation">
									<a role="menuitem" tabindex="-1"  href="http://beeradvocate.com/user/profile/">BeerAdvocate</a>
								</li>
							</ul>
						</li>
						<li class="dropdown" id="feeds">
							<a class="dropdown-toggle" role="button" id="feedsdrop" data-toggle="dropdown" href="#">
	                			Feeds <b class="caret"></b>
	                		</a>
	                		<ul class="dropdown-menu" role="menu" aria-labelledby="feedsdrop">
	                			<li role="presentation">
									<a role="menuitem" tabindex="-1"  href="/atom.xml">Everything</a>
								</li>
								<li role="presentation">
									<a role="menuitem" tabindex="-1"  href="/category/journal/atom.xml">Journal</a>
								</li>
								<li role="presentation">
									<a role="menuitem" tabindex="-1"  href="/category/article/atom.xml">Articles</a>
								</li>
								<li role="presentation">
									<a role="menuitem" tabindex="-1"  href="/tag/java/atom.xml">Java</a>
								</li>
								<li role="presentation">
									<a role="menuitem" tabindex="-1"  href="/tag/ruby/atom.xml">Ruby</a>
								</li>
								<li role="presentation">
									<a  role="menuitem" tabindex="-1" href="/tag/linux/atom.xml">Linux</a>
								</li>
							</ul>
						</li>
	  				</ul>-->
				</div>
			</div>
		</div>
		<div class="container main">
			<div class="row sitemap" id="sitemap">
				<div class="col-lg-12">
					<button type="button" class="close" id="sitemapclose">&times;</button>
					<div class="row">
						<div class="col-lg-11 sitemap-section">
							<h4>分类</h4>
							<div class="row">
								 
									<div class="col-lg-3">
										<a href="/category/journal/">journal <span class="badge">20</span></a>
									</div>
								 
									<div class="col-lg-3">
										<a href="/category/notes/">notes <span class="badge">1</span></a>
									</div>
								 
									<div class="col-lg-3">
										<a href="/category/android/">android <span class="badge">1</span></a>
									</div>
								
							</div>
						</div>
						<div class="col-lg-12 sitemap-section">
							<h4>标签</h4>
							<div class="row">
								 
									<div class="col-lg-2">
										<a href="/tag/funnyordie/">funnyordie <span class="badge">1</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/humor/">humor <span class="badge">1</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/personal/">personal <span class="badge">8</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/realjenius.com/">realjenius.com <span class="badge">9</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/finances/">finances <span class="badge">2</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/mint/">mint <span class="badge">2</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/quicken/">quicken <span class="badge">2</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/analytics/">analytics <span class="badge">1</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/hosting/">hosting <span class="badge">3</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/media temple/">media temple <span class="badge">5</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/(ve)/">(ve) <span class="badge">1</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/cloudflare/">cloudflare <span class="badge">2</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/linux/">linux <span class="badge">3</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/ubuntu/">ubuntu <span class="badge">1</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/gaming/">gaming <span class="badge">1</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/valve/">valve <span class="badge">1</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/steam/">steam <span class="badge">2</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/desktop/">desktop <span class="badge">2</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/elementaryos/">elementaryos <span class="badge">2</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/LTS/">LTS <span class="badge">2</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/EOL/">EOL <span class="badge">2</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/bootstrap/">bootstrap <span class="badge">1</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/site/">site <span class="badge">1</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/css/">css <span class="badge">1</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/mediatemple/">mediatemple <span class="badge">2</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/php/">php <span class="badge">1</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/framework/">framework <span class="badge">1</span></a>
									</div>
								 
									<div class="col-lg-2">
										<a href="/tag/android/">android <span class="badge">1</span></a>
									</div>
								
							</div>
						</div>							
					</div>
				</div>
			</div>
			
			<div class="row">
	<div class="col-lg-12" id="content">
		<article class="page">
	<div class="page-header">
		<h2 class="entry-title"><a href="/journal/2011/04/12/realjenius-on-play.html">RealJenius.com - Now With Less PHP</a>
			
		</h2>
        <small>
                <span class="entry-date">2011-04-12</span>
        </small>
	</div>

	<div class="article-body">
		<div class="row">
			<div class="col-lg-12">
				<div class="article-body">
					<p>I have long time been a proponent of WordPress for a quick and painless blogging platform. For years I toiled to create 
a favorable personal blogging platform; re-inventing it time and again in some variant of Java technologies, and constantly being fed up. Despite being a good learning experience, my custom blog was always a thorough pain in my ass to maintain.
That’s what made Drupal, and later WordPress, so appealing. I was able to focus on what I wanted to do, which was deliver    content, without having to futz with my rushed and unfinished web forms. I knew that my site software was going to be
maintained and regularly audited by community reports with respect to security, etc. Unfortunately, despite the flexibility
and plugin architecture, WordPress carries a certain degree of cruft with it:</p>

<ul>
  <li>PHP is surprisingly hard to host scalably and efficiently.</li>
  <li>WordPress needs a rack of plugins installed to be even remotely performant - most of it gross caching schemes.</li>
  <li>I rather despise maintaining relational database installations.</li>
</ul>

<p>I’ve never been a fan of PHP in any shape or form, so I think it says a lot about how burnt out I had become on trying to 
build a one-man CMS, that I was using WP, and singing its praises.</p>

<p>A post over at <a href="http://nesbot.com">Nesbot.com</a> inspired me to revisit my embargo on personal blog coding, as Brian Nesbitt <a href="http://nesbot.com/2011/11/22/now-running-on-play-2-beta">detailed how he migrated his blog 
with Play 2.0</a>. What struck me in particular was, not so much that he was using <a href="http://www.playframework.org">Play!</a>,
nor that he was now using the shiny 2.0 beta, but that he had built his site without any complex data-store on the back-end.</p>

<p>Suddenly: lightbulb! This triggered me to explore the ideas he so graciously shared with his public site code on github:
<a href="https://github.com/briannesbitt/nesbot.com">https://github.com/briannesbitt/nesbot.com</a>. Of particular note:</p>

<ul>
  <li>His blog entries are simply Play! UI templates.</li>
  <li>The entire blog-entry history is loaded in memory at startup, and cross-indexed for the various navigation.</li>
  <li>The comment system is provided by <a href="http://www.disqus.com">Disqus</a>.</li>
  <li>Blog entries are committed to GitHub, and ostensibly pulled to his server where he then simply restarts the 
server to load the new article.</li>
</ul>

<p>I didn’t spend much time actually digesting his code, but I appreciate that he posted his approach online, as it
immediately got my gears turning. While I’m not quite ready to share the source of my site (more on this in a moment),
I will share some details on the approach I’ve taken:</p>

<ul>
  <li>Each of my blog posts is a template file, and has a “meta” comment on the top. This defines things like the
title, a short summary, the publish date, tags (comma-separated), the category (journal or article),
and optionally some additional compatibility bits, like a legacy id (see below). The comment is YAML formatted
so I have some leniency as I’m authoring, and good error reporting if I get the formatting wrong.</li>
  <li>The file name represents the blog “slug”.</li>
  <li>On startup, I spin through the entire post directory recursively, reading the header comments one-by-one, and
tossing them into a series of in-memory indexes for traversal. The collections are sorted in date descending order,
as that’s the most generally useful ordering for the site.</li>
  <li>The re-load process can also be triggered by an administrative call through the HTTP interface. The reload is completely free of locks via some judicious use of atomic references.</li>
  <li>I’m also using <a href="http://www.disqus.com">Disqus</a> for my comment system, like Brian. Importing from my
existing wordpress site was, for the most part painless. I simply installed the Disqus plugin into my WP install,
and did an export. The hardest part was supporting legacy identifiers. Turns out the IDs that
it uses are: <code>[wpid] http://[site-address]?p=[wpid]</code> - this is where the legacy ID entry comes in to play above.</li>
  <li>I have a private git repo on my server, and every time I write an article, I simply push to the git repo. The server then pulls from the git repo, and I run the administrative reload.</li>
  <li>I’m using <a href="http://alexgorbatchev.com/SyntaxHighlighter/">SyntaxHighlighter</a> for code highlighting. The highlighters that are declared in the post are loaded in “on-demand”, so the included JS is kept to a minimum.</li>
  <li>I have a few custom Play! tags to make writing blogs easier - they do things like reverse routes to other blog posts into anchor tags, create captioned image markup, and dynamically generate series blocks (as seen in my <a href="/tags/distilling-jruby">Distilling JRuby</a> series).</li>
  <li>I’m using a Play profile ID on my server, and %prod. prefixes to support dev and prod properties concurrently
in the same file.</li>
  <li>I’m using a variant of <a href="http://www.playframework.org/community/snippets/17">This Ubuntu up-start script</a> to bootstrap my Play! Framework runtime.</li>
  <li>Thanks to the expressiveness of the the Play routes system, I was able to effectively model my URLs without any
change in pathing to match the existing WordPress site. There are some exceptions, but they are only places where I
felt a change was for the best.</li>
</ul>

<p>I have immediately noticed a complete lack of latency on page loads, which I find quite refreshing. Occasionally one of the Javascript chunks blocks the page-load a bit (whether it be Google Analytics, Disqus, the syntax highlighter, or the Twitter widget, I can’t say). I am keeping my eye out for this, and hopefully will figure it out with Firebug, and I can squash it. Overall, this has been a minimalist’s dream as compared to something chunky like WP.</p>

<p>Before I globally share the blog code, I really wanted to get a few things tidied up (call me vain):</p>

<ul>
  <li>Right now the administrative reload is a bit of a shim. I’d really like this to be an automated “on-git-update” event, 
so my involvement is simply a matter of avoiding malformed posting, and pushing the content.</li>
  <li>My error handling is pretty weak-sauce right now - I was slapping this together pretty quickly; the majority of my 
time was in converting my blog entries (which I did by hand, like an idiot).</li>
  <li>Right now I’m using Play 1.2.4 - I want to move to 2.0, but unlike Brian, I plan to wait until it’s final before 
converting.</li>
</ul>

<p>Once I get through those hurdles, I’ll throw out a follow-up, and hopefully some public mirrors so folks can get some
value (however small) out of my derivative journey. If you have any questions in the mean-time, <a href="/contact">send me a note</a>.</p>

				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-5 col-offset-7">
				
				<div class="post-details">
	分类:
		
			
				<a href="/category/journal"><span class="label">journal</span></a>
			
		
	|
	标签:
		
			
				<a href="/tag/personal"><span class="label">personal</span></a>
			
				<a href="/tag/realjenius.com"><span class="label">realjenius.com</span></a>
			
		
	|
	<a href="http://panke.me/journal/2011/04/12/realjenius-on-play.html"><span class="label label-info">Permalink</span></a>
</div>


			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<div id="disqus_thread"></div>
				<!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="" data-title="" data-url=""></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"panke"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
<!-- 多说公共JS代码 end -->
			</div>
		</div>
	</div>
</article>
	</div>
</div>

	    </div>
		<footer class="rjfooter">
			<div class="container">
				<div class="row">
					<div class="col-lg-6 col-offset-3">
						<p>&copy 2016-2017 - panke.me | Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a> &amp; <a href="http://github.com" target="_blank">GitHub</a></p>
						
					</div>
				</div>
			</div>
		</footer>
		<script type="text/javascript">

            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-27375996-1']);
            _gaq.push(['_trackPageview']);

            (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();

        </script>
        <script type="text/javascript" src="/js/jquery-2.0.3.min.js"></script>
        <script type="text/javascript" src="/js/bootstrap.min.js"></script>
        <script type="text/javascript">
        	$(document).ready(function() {
    			$("#sitemapbtn").click(function() {
					$("#sitemap").slideToggle();
					return false;
    			});
    			$("#sitemapclose").click(function() {
    				$("#sitemap").slideUp();
    				return false;
    			});
        	});
        </script>
    </body>
</html>
